2025-11-25 07:02:34.876 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:02:34.919 +00:00 [INF] Subscription background service started at "2025-11-25T07:02:34.9185796Z" (User: , Inst: )
2025-11-25 07:02:36.098 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:02:36.320 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:02:36.329 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Vendors/health (User: anonymous, Inst: none)
System.InvalidOperationException: Unable to resolve service for type 'AssetManagement.API.DAL.Services.VendorsService.IVendorsService' while attempting to activate 'AssetManagement.API.Controllers.VendorsController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method69(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 07:02:36.462 +00:00 [INF] Subscription check completed at "2025-11-25T07:02:36.4626071Z" (User: , Inst: )
2025-11-25 07:03:21.121 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:03:21.145 +00:00 [INF] Subscription background service started at "2025-11-25T07:03:21.1449087Z" (User: , Inst: )
2025-11-25 07:03:21.908 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:03:22.131 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:03:22.165 +00:00 [INF] Subscription check completed at "2025-11-25T07:03:22.1650095Z" (User: , Inst: )
2025-11-25 07:03:22.316 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 07:03:42.078 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:03:42.101 +00:00 [INF] Subscription background service started at "2025-11-25T07:03:42.1014757Z" (User: , Inst: )
2025-11-25 07:03:42.871 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:03:43.030 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:03:43.101 +00:00 [INF] Subscription check completed at "2025-11-25T07:03:43.1012974Z" (User: , Inst: )
2025-11-25 07:03:43.211 +00:00 [INF] Fetching asset type by id "c5e32969-de1a-413b-9c3c-8ca0ed42c4cb" (User: anonymous, Inst: none)
2025-11-25 07:03:43.323 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 07:03:43.323 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 07:03:43.370 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 07:04:44.244 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:04:44.269 +00:00 [INF] Subscription background service started at "2025-11-25T07:04:44.2690825Z" (User: , Inst: )
2025-11-25 07:04:45.204 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:04:45.404 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:04:45.444 +00:00 [INF] Subscription check completed at "2025-11-25T07:04:45.4448919Z" (User: , Inst: )
2025-11-25 07:04:45.587 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 07:04:50.968 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:04:50.991 +00:00 [INF] Subscription background service started at "2025-11-25T07:04:50.9913587Z" (User: , Inst: )
2025-11-25 07:04:51.790 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:04:51.985 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:04:52.020 +00:00 [INF] Subscription check completed at "2025-11-25T07:04:52.0207736Z" (User: , Inst: )
2025-11-25 07:04:52.158 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 07:04:57.777 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:04:57.806 +00:00 [INF] Subscription background service started at "2025-11-25T07:04:57.8065823Z" (User: , Inst: )
2025-11-25 07:04:58.587 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:04:58.789 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:04:58.836 +00:00 [INF] Subscription check completed at "2025-11-25T07:04:58.8365813Z" (User: , Inst: )
2025-11-25 07:04:58.973 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 07:06:48.418 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:06:48.453 +00:00 [INF] Subscription background service started at "2025-11-25T07:06:48.4529137Z" (User: , Inst: )
2025-11-25 07:06:49.537 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:06:49.725 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:09:00.981 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:09:01.013 +00:00 [INF] Subscription background service started at "2025-11-25T07:09:01.0130055Z" (User: , Inst: )
2025-11-25 07:09:02.165 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:09:02.357 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:09:25.734 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:09:25.761 +00:00 [INF] Subscription background service started at "2025-11-25T07:09:25.7614492Z" (User: , Inst: )
2025-11-25 07:09:26.679 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:09:26.834 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:09:51.980 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:09:52.008 +00:00 [INF] Subscription background service started at "2025-11-25T07:09:52.0083925Z" (User: , Inst: )
2025-11-25 07:09:52.862 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:09:53.036 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:09:53.043 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Vendors/health (User: anonymous, Inst: none)
System.InvalidOperationException: Unable to resolve service for type 'AssetManagement.API.DAL.Services.VendorsService.IVendorsService' while attempting to activate 'AssetManagement.API.Controllers.VendorsController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method167(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 07:16:13.158 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:16:13.185 +00:00 [INF] Subscription background service started at "2025-11-25T07:16:13.1849754Z" (User: , Inst: )
2025-11-25 07:16:14.150 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:16:14.310 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:16:14.468 +00:00 [INF] Subscription check completed at "2025-11-25T07:16:14.4687955Z" (User: , Inst: )
2025-11-25 07:16:14.544 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 07:16:14.545 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 07:30:12.457 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:30:12.545 +00:00 [INF] Subscription background service started at "2025-11-25T07:30:12.5437246Z" (User: , Inst: )
2025-11-25 07:30:13.706 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:30:13.906 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:30:14.070 +00:00 [INF] Subscription check completed at "2025-11-25T07:30:14.0708465Z" (User: , Inst: )
2025-11-25 07:36:49.438 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:36:49.471 +00:00 [INF] Subscription background service started at "2025-11-25T07:36:49.4714928Z" (User: , Inst: )
2025-11-25 07:36:50.704 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:36:51.000 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:36:51.115 +00:00 [INF] Subscription check completed at "2025-11-25T07:36:51.1156501Z" (User: , Inst: )
2025-11-25 07:41:37.452 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:41:37.555 +00:00 [INF] Subscription background service started at "2025-11-25T07:41:37.5528111Z" (User: , Inst: )
2025-11-25 07:41:40.915 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:42:34.383 +00:00 [ERR] An error occurred using the connection to database 'asset_mgmt' on server 'tcp://localhost:5432'. (User: , Inst: )
2025-11-25 07:42:34.673 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.NpgsqlDataSource.Bootstrap(NpgsqlConnector connector, NpgsqlTimeout timeout, Boolean forceReload, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() (User: , Inst: )
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.NpgsqlDataSource.Bootstrap(NpgsqlConnector connector, NpgsqlTimeout timeout, Boolean forceReload, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-25 07:42:35.439 +00:00 [ERR] Error occurred during subscription check (User: , Inst: )
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.NpgsqlDataSource.Bootstrap(NpgsqlConnector connector, NpgsqlTimeout timeout, Boolean forceReload, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.Services.SubscriptionService.SubscriptionService.CheckSubscriptionsAsync() in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\SubscriptionService\SubscriptionService.cs:line 15
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionBackgroundService.cs:line 19
2025-11-25 07:42:35.641 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:43:16.212 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:43:16.239 +00:00 [INF] Subscription background service started at "2025-11-25T07:43:16.2386387Z" (User: , Inst: )
2025-11-25 07:43:17.144 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:43:17.308 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:43:17.435 +00:00 [INF] Subscription check completed at "2025-11-25T07:43:17.4358785Z" (User: , Inst: )
2025-11-25 07:43:20.329 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:43:20.355 +00:00 [INF] Subscription background service started at "2025-11-25T07:43:20.3550066Z" (User: , Inst: )
2025-11-25 07:43:21.216 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:43:21.373 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:43:21.458 +00:00 [INF] Subscription check completed at "2025-11-25T07:43:21.4582615Z" (User: , Inst: )
2025-11-25 07:43:26.111 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:43:26.139 +00:00 [INF] Subscription background service started at "2025-11-25T07:43:26.1389539Z" (User: , Inst: )
2025-11-25 07:43:27.047 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:43:27.311 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:43:27.397 +00:00 [INF] Subscription check completed at "2025-11-25T07:43:27.3975053Z" (User: , Inst: )
2025-11-25 07:43:56.726 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 07:43:56.752 +00:00 [INF] Subscription background service started at "2025-11-25T07:43:56.7521263Z" (User: , Inst: )
2025-11-25 07:43:57.550 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 07:43:57.703 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 07:43:57.771 +00:00 [INF] Subscription check completed at "2025-11-25T07:43:57.7719723Z" (User: , Inst: )
2025-11-25 07:43:57.858 +00:00 [INF] Fetching asset type by id "b38e1b82-e329-4037-ac92-26855fa53dc1" (User: anonymous, Inst: none)
2025-11-25 07:43:57.941 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 07:43:57.941 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 07:43:58.014 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 10:31:02.584 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 10:31:02.627 +00:00 [INF] Subscription background service started at "2025-11-25T10:31:02.6273232Z" (User: , Inst: )
2025-11-25 10:31:03.873 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 10:31:04.103 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 10:31:04.180 +00:00 [INF] Subscription check completed at "2025-11-25T10:31:04.1799986Z" (User: , Inst: )
2025-11-25 10:31:04.180 +00:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccumulatedDepreciation", a."AssetCategoryId", a."AssetTypeId", a."BranchId", a."CreatedAt", a."CurrentUnits", a."CurrentValue", a."DepreciationMethodEnum", a."InstitutionId", a."IsActive", a."MaintenanceDueDate", a."Name", a."NextMaintenanceDate", a."PurchaseDate", a."PurchasePrice", a."SalvageValue", a."SanityAssetId", a."SanityUrl", a."SerialNumber", a."UnitsTotal", a."UpdatedAt", a."UsefulLifeYears", a."VendorId"
FROM "Assets" AS a (User: , Inst: )
2025-11-25 10:31:04.199 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 10:31:04.200 +00:00 [ERR] BackgroundService failed (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 10:31:04.200 +00:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted. (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 10:31:04.205 +00:00 [INF] ðŸ’¤ Application shutting down... (User: , Inst: )
2025-11-25 10:51:47.518 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 10:51:47.563 +00:00 [INF] Subscription background service started at "2025-11-25T10:51:47.5627082Z" (User: , Inst: )
2025-11-25 10:51:48.855 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 10:51:49.049 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 10:51:49.213 +00:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccumulatedDepreciation", a."AssetCategoryId", a."AssetTypeId", a."BranchId", a."CreatedAt", a."CurrentUnits", a."CurrentValue", a."DepreciationMethodEnum", a."InstitutionId", a."IsActive", a."MaintenanceDueDate", a."Name", a."NextMaintenanceDate", a."PurchaseDate", a."PurchasePrice", a."SalvageValue", a."SanityAssetId", a."SanityUrl", a."SerialNumber", a."UnitsTotal", a."UpdatedAt", a."UsefulLifeYears", a."VendorId"
FROM "Assets" AS a (User: , Inst: )
2025-11-25 10:51:49.219 +00:00 [INF] Subscription check completed at "2025-11-25T10:51:49.2192313Z" (User: , Inst: )
2025-11-25 10:51:49.233 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 10:51:49.235 +00:00 [ERR] BackgroundService failed (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 10:51:49.235 +00:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted. (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 10:51:49.242 +00:00 [INF] ðŸ’¤ Application shutting down... (User: , Inst: )
2025-11-25 11:33:31.670 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:33:31.707 +00:00 [INF] Subscription background service started at "2025-11-25T11:33:31.7073906Z" (User: , Inst: )
2025-11-25 11:33:32.739 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:33:32.941 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:33:33.078 +00:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccumulatedDepreciation", a."AssetCategoryId", a."AssetTypeId", a."BranchId", a."CreatedAt", a."CurrentUnits", a."CurrentValue", a."DepreciationMethodEnum", a."InstitutionId", a."IsActive", a."MaintenanceDueDate", a."Name", a."NextMaintenanceDate", a."PurchaseDate", a."PurchasePrice", a."SalvageValue", a."SanityAssetId", a."SanityUrl", a."SerialNumber", a."UnitsTotal", a."UpdatedAt", a."UsefulLifeYears", a."VendorId"
FROM "Assets" AS a (User: , Inst: )
2025-11-25 11:33:33.083 +00:00 [INF] Subscription check completed at "2025-11-25T11:33:33.0836247Z" (User: , Inst: )
2025-11-25 11:33:33.095 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 11:33:33.097 +00:00 [ERR] BackgroundService failed (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 11:33:33.097 +00:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted. (User: , Inst: )
Npgsql.PostgresException (0x80004005): 42703: column a.AssetCategoryId does not exist

POSITION: 45
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.GetAllAsync(CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 12
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 71
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 27
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column a.AssetCategoryId does not exist
    Position: 45
    File: parse_relation.c
    Line: 3721
    Routine: errorMissingColumn
2025-11-25 11:33:33.132 +00:00 [INF] ðŸ’¤ Application shutting down... (User: , Inst: )
2025-11-25 11:46:59.391 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:46:59.433 +00:00 [INF] Subscription background service started at "2025-11-25T11:46:59.4332305Z" (User: , Inst: )
2025-11-25 11:47:00.595 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:47:00.766 +00:00 [INF] Subscription check completed at "2025-11-25T11:47:00.7661639Z" (User: , Inst: )
2025-11-25 11:47:00.845 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:47:01.041 +00:00 [INF] Fetching asset type by id "4ea975e1-4efa-4a70-979b-1dacbe1c80e9" (User: anonymous, Inst: none)
2025-11-25 11:47:01.253 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:47:01.254 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:47:01.412 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 11:47:01.490 +00:00 [INF] Creating asset type with name Machinery (User: anonymous, Inst: none)
2025-11-25 11:47:07.175 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:47:07.212 +00:00 [INF] Subscription background service started at "2025-11-25T11:47:07.2120464Z" (User: , Inst: )
2025-11-25 11:47:08.263 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:47:08.397 +00:00 [INF] Subscription check completed at "2025-11-25T11:47:08.3979399Z" (User: , Inst: )
2025-11-25 11:47:08.418 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:47:08.615 +00:00 [INF] Fetching asset type by id "9e2930fe-216e-4381-9dcc-ffd7d745cf1d" (User: anonymous, Inst: none)
2025-11-25 11:47:08.758 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:47:08.759 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:47:08.855 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 11:47:08.947 +00:00 [INF] Creating asset type with name MedicalEquipment (User: anonymous, Inst: none)
2025-11-25 11:47:36.154 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:47:36.179 +00:00 [INF] Subscription background service started at "2025-11-25T11:47:36.1795477Z" (User: , Inst: )
2025-11-25 11:47:37.116 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:47:37.247 +00:00 [INF] Subscription check completed at "2025-11-25T11:47:37.2474038Z" (User: , Inst: )
2025-11-25 11:47:37.275 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:47:37.538 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 11:47:37.626 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:47:37.626 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:47:51.081 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:47:51.109 +00:00 [INF] Subscription background service started at "2025-11-25T11:47:51.1086192Z" (User: , Inst: )
2025-11-25 11:47:52.068 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:47:52.203 +00:00 [INF] Subscription check completed at "2025-11-25T11:47:52.2031164Z" (User: , Inst: )
2025-11-25 11:47:52.226 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:47:52.499 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 11:47:52.591 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:47:52.591 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:47:58.281 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:47:58.307 +00:00 [INF] Subscription background service started at "2025-11-25T11:47:58.3073292Z" (User: , Inst: )
2025-11-25 11:47:59.169 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:47:59.323 +00:00 [INF] Subscription check completed at "2025-11-25T11:47:59.3231519Z" (User: , Inst: )
2025-11-25 11:47:59.347 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:47:59.519 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:47:59.520 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:48:06.314 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:48:06.381 +00:00 [INF] Subscription background service started at "2025-11-25T11:48:06.3765438Z" (User: , Inst: )
2025-11-25 11:48:07.301 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:48:07.431 +00:00 [INF] Subscription check completed at "2025-11-25T11:48:07.4312795Z" (User: , Inst: )
2025-11-25 11:48:07.458 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:48:32.989 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:48:33.028 +00:00 [INF] Subscription background service started at "2025-11-25T11:48:33.0280708Z" (User: , Inst: )
2025-11-25 11:48:33.960 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:48:34.103 +00:00 [INF] Subscription check completed at "2025-11-25T11:48:34.1036388Z" (User: , Inst: )
2025-11-25 11:48:34.142 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:48:34.491 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:48:34.493 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:48:50.185 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:48:50.213 +00:00 [INF] Subscription background service started at "2025-11-25T11:48:50.2128639Z" (User: , Inst: )
2025-11-25 11:48:51.531 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:48:51.671 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:48:51.747 +00:00 [INF] Subscription check completed at "2025-11-25T11:48:51.7471824Z" (User: , Inst: )
2025-11-25 11:48:51.957 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:48:51.958 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:49:48.438 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:49:48.469 +00:00 [INF] Subscription background service started at "2025-11-25T11:49:48.4687491Z" (User: , Inst: )
2025-11-25 11:49:49.401 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:49:49.581 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:49:49.667 +00:00 [INF] Subscription check completed at "2025-11-25T11:49:49.6676442Z" (User: , Inst: )
2025-11-25 11:49:49.900 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:49:49.901 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:50:16.535 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:50:16.564 +00:00 [INF] Subscription background service started at "2025-11-25T11:50:16.5637301Z" (User: , Inst: )
2025-11-25 11:50:17.453 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:50:17.619 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:50:17.700 +00:00 [INF] Subscription check completed at "2025-11-25T11:50:17.7004383Z" (User: , Inst: )
2025-11-25 11:50:18.121 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:50:18.122 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:50:37.383 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:50:37.411 +00:00 [INF] Subscription background service started at "2025-11-25T11:50:37.4109024Z" (User: , Inst: )
2025-11-25 11:50:38.312 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:50:38.483 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:50:38.567 +00:00 [INF] Subscription check completed at "2025-11-25T11:50:38.5677237Z" (User: , Inst: )
2025-11-25 11:50:38.822 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 11:50:39.063 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:50:39.063 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:50:52.064 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:50:52.093 +00:00 [INF] Subscription background service started at "2025-11-25T11:50:52.0931503Z" (User: , Inst: )
2025-11-25 11:50:53.020 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:50:53.171 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:50:53.251 +00:00 [INF] Subscription check completed at "2025-11-25T11:50:53.2512282Z" (User: , Inst: )
2025-11-25 11:50:53.349 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:50:53.350 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 11:51:06.125 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 11:51:06.153 +00:00 [INF] Subscription background service started at "2025-11-25T11:51:06.1526527Z" (User: , Inst: )
2025-11-25 11:51:07.150 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 11:51:07.306 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 11:51:07.402 +00:00 [INF] Subscription check completed at "2025-11-25T11:51:07.4023210Z" (User: , Inst: )
2025-11-25 11:51:07.501 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 11:51:07.502 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 16:17:47.575 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 16:17:47.626 +00:00 [INF] Subscription background service started at "2025-11-25T16:17:47.6262966Z" (User: , Inst: )
2025-11-25 16:17:48.873 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 16:17:49.096 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 16:17:49.172 +00:00 [INF] Subscription check completed at "2025-11-25T16:17:49.1720266Z" (User: , Inst: )
2025-11-25 16:17:49.327 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 16:17:49.328 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 16:20:17.308 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 16:20:17.336 +00:00 [INF] Subscription background service started at "2025-11-25T16:20:17.3364617Z" (User: , Inst: )
2025-11-25 16:20:18.189 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 16:20:18.343 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 16:20:18.426 +00:00 [INF] Subscription check completed at "2025-11-25T16:20:18.4260345Z" (User: , Inst: )
2025-11-25 16:21:10.259 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 16:21:10.306 +00:00 [INF] Subscription background service started at "2025-11-25T16:21:10.3056366Z" (User: , Inst: )
2025-11-25 16:21:11.314 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 16:21:11.473 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 16:21:11.693 +00:00 [INF] Subscription check completed at "2025-11-25T16:21:11.6936133Z" (User: , Inst: )
2025-11-25 16:21:49.853 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 16:21:49.876 +00:00 [INF] Subscription background service started at "2025-11-25T16:21:49.8765016Z" (User: , Inst: )
2025-11-25 16:21:50.880 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 16:21:51.167 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 16:21:51.255 +00:00 [INF] Subscription check completed at "2025-11-25T16:21:51.2552300Z" (User: , Inst: )
2025-11-25 16:22:16.833 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 16:22:16.862 +00:00 [INF] Subscription background service started at "2025-11-25T16:22:16.8617439Z" (User: , Inst: )
2025-11-25 16:22:17.867 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 16:22:18.043 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 16:22:18.133 +00:00 [INF] Subscription check completed at "2025-11-25T16:22:18.1338200Z" (User: , Inst: )
2025-11-25 16:22:18.411 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 16:22:18.867 +00:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 16:22:18.895 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 16:22:18.896 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 16:22:57.903 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 16:22:58.024 +00:00 [INF] Subscription background service started at "2025-11-25T16:22:58.0231215Z" (User: , Inst: )
2025-11-25 16:23:00.788 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 16:25:12.430 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 16:25:12.768 +00:00 [INF] Subscription check completed at "2025-11-25T16:25:12.7681170Z" (User: , Inst: )
2025-11-25 16:26:11.849 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 16:55:46.120 +00:00 [ERR] Failed executing DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 16:55:46.176 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method639(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
2025-11-25 16:55:46.792 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method639(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 16:56:30.732 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 16:56:30.843 +00:00 [INF] Subscription background service started at "2025-11-25T16:56:30.8413266Z" (User: , Inst: )
2025-11-25 16:56:33.965 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 16:56:34.825 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 16:56:35.366 +00:00 [INF] Subscription check completed at "2025-11-25T16:56:35.3662088Z" (User: , Inst: )
2025-11-25 16:56:36.145 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 17:02:37.589 +00:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 17:02:37.631 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method639(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
2025-11-25 17:02:38.211 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method639(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 17:25:27.170 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 17:25:27.221 +00:00 [INF] Subscription background service started at "2025-11-25T17:25:27.2208668Z" (User: , Inst: )
2025-11-25 17:25:28.225 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 17:25:28.402 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 17:25:28.494 +00:00 [INF] Subscription check completed at "2025-11-25T17:25:28.4945101Z" (User: , Inst: )
2025-11-25 17:25:28.842 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 17:25:29.259 +00:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 17:25:29.271 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
2025-11-25 17:25:29.272 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 17:35:21.720 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 17:35:21.861 +00:00 [INF] Subscription background service started at "2025-11-25T17:35:21.8597498Z" (User: , Inst: )
2025-11-25 17:35:25.609 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 17:35:26.456 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 17:35:26.921 +00:00 [INF] Subscription check completed at "2025-11-25T17:35:26.9217478Z" (User: , Inst: )
2025-11-25 17:35:27.687 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 17:49:01.201 +00:00 [ERR] Failed executing DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 17:49:01.269 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
2025-11-25 17:49:02.029 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 17:58:24.154 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 17:58:24.192 +00:00 [INF] Subscription background service started at "2025-11-25T17:58:24.1923394Z" (User: , Inst: )
2025-11-25 17:58:25.633 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 17:58:25.995 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 17:58:26.106 +00:00 [INF] Subscription check completed at "2025-11-25T17:58:26.1064499Z" (User: , Inst: )
2025-11-25 17:58:26.465 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 17:58:27.062 +00:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 17:58:27.074 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 17:58:27.075 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 17:59:41.112 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 17:59:41.159 +00:00 [INF] Subscription background service started at "2025-11-25T17:59:41.1583250Z" (User: , Inst: )
2025-11-25 17:59:42.459 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 17:59:42.686 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 17:59:42.834 +00:00 [INF] Subscription check completed at "2025-11-25T17:59:42.8341579Z" (User: , Inst: )
2025-11-25 17:59:43.235 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 17:59:43.753 +00:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 17:59:43.769 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 17:59:43.770 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method644(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 18:32:53.924 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:32:53.957 +00:00 [INF] Subscription background service started at "2025-11-25T18:32:53.9573615Z" (User: , Inst: )
2025-11-25 18:32:54.969 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:32:55.219 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:32:55.361 +00:00 [INF] Subscription check completed at "2025-11-25T18:32:55.3618729Z" (User: , Inst: )
2025-11-25 18:32:55.491 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:32:55.561 +00:00 [INF] Creating asset type with name ItEquipment (User: anonymous, Inst: none)
2025-11-25 18:33:09.507 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:33:09.547 +00:00 [INF] Subscription background service started at "2025-11-25T18:33:09.5467841Z" (User: , Inst: )
2025-11-25 18:33:11.066 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:33:11.417 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:33:11.500 +00:00 [INF] Subscription check completed at "2025-11-25T18:33:11.5004229Z" (User: , Inst: )
2025-11-25 18:33:11.727 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:33:11.814 +00:00 [INF] Creating asset type with name MedicalEquipment (User: anonymous, Inst: none)
2025-11-25 18:33:11.852 +00:00 [ERR] Unhandled exception occurred while processing request: /api/AssetTypes/ (User: anonymous, Inst: none)
AssetManagement.API.Exceptions.ConflictException: Asset type with name 'MedicalEquipment' already exists.
   at AssetManagement.API.DAL.Services.AssetTypeService.AssetTypeService.CreateAsync(AssetTypesCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetTypeService\AssetTypeService.cs:line 31
   at AssetManagement.API.Controllers.AssetTypesController.Create(AssetTypesCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetTypesController.cs:line 45
   at lambda_method442(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 18:33:57.698 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:33:57.735 +00:00 [INF] Subscription background service started at "2025-11-25T18:33:57.7353321Z" (User: , Inst: )
2025-11-25 18:33:58.991 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:33:59.273 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:33:59.343 +00:00 [INF] Subscription check completed at "2025-11-25T18:33:59.3431620Z" (User: , Inst: )
2025-11-25 18:33:59.568 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:33:59.676 +00:00 [INF] Creating asset type with name Vehicles (User: anonymous, Inst: none)
2025-11-25 18:34:05.664 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:34:05.697 +00:00 [INF] Subscription background service started at "2025-11-25T18:34:05.6973460Z" (User: , Inst: )
2025-11-25 18:34:06.722 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:34:06.976 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:34:07.039 +00:00 [INF] Subscription check completed at "2025-11-25T18:34:07.0393743Z" (User: , Inst: )
2025-11-25 18:34:07.215 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:40:38.581 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:40:38.620 +00:00 [INF] Subscription background service started at "2025-11-25T18:40:38.6195872Z" (User: , Inst: )
2025-11-25 18:40:39.857 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:40:40.117 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:40:40.220 +00:00 [INF] Subscription check completed at "2025-11-25T18:40:40.2201563Z" (User: , Inst: )
2025-11-25 18:40:40.472 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:40:40.572 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:40:40.696 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 18:40:40.696 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 18:41:03.770 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:41:03.801 +00:00 [INF] Subscription background service started at "2025-11-25T18:41:03.8009369Z" (User: , Inst: )
2025-11-25 18:41:04.976 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:41:05.159 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:41:05.248 +00:00 [INF] Subscription check completed at "2025-11-25T18:41:05.2485077Z" (User: , Inst: )
2025-11-25 18:41:05.366 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:48:10.898 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:48:10.938 +00:00 [INF] Subscription background service started at "2025-11-25T18:48:10.9382782Z" (User: , Inst: )
2025-11-25 18:48:11.912 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:48:12.109 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:48:12.216 +00:00 [INF] Subscription check completed at "2025-11-25T18:48:12.2167860Z" (User: , Inst: )
2025-11-25 18:48:12.360 +00:00 [ERR] Error processing asset "3fa85f64-5717-4562-b3fc-2c963f66afa6" (User: , Inst: )
System.DivideByZeroException: Attempted to divide by zero.
   at System.Decimal.DecCalc.VarDecDiv(DecCalc& d1, DecCalc& d2)
   at System.Decimal.op_Division(Decimal d1, Decimal d2)
   at AssetManagement.API.DAL.Services.DepreciationService.DepreciationService.CalculateCurrentValue(AssetsModel assetsModel) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\DepreciationService\DepreciationService.cs:line 50
   at AssetManagement.API.DAL.Services.DepreciationService.DepreciationService.UpdateDepreciationValuesAsync(AssetsModel assetsModel) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\DepreciationService\DepreciationService.cs:line 82
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 77
2025-11-25 18:48:12.687 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 18:48:13.188 +00:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = Guid), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Guid), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?', @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (DbType = Decimal), @p16='?' (DbType = Decimal), @p17='?', @p18='?', @p19='?', @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = Int32), @p23='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Assets" ("Id", "AccumulatedDepreciation", "AssetCategoryId", "AssetTypeId", "BranchId", "CreatedAt", "CurrentUnits", "CurrentValue", "DepreciationMethodEnum", "InstitutionId", "IsActive", "MaintenanceDueDate", "Name", "NextMaintenanceDate", "PurchaseDate", "PurchasePrice", "SalvageValue", "SanityAssetId", "SanityUrl", "SerialNumber", "UnitsTotal", "UpdatedAt", "UsefulLifeYears", "VendorId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23); (User: anonymous, Inst: none)
2025-11-25 18:48:13.193 +00:00 [ERR] An exception occurred in the database while saving changes for context type 'AssetManagement.API.DAL.DatabaseContext.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method759(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 18:48:13.194 +00:00 [ERR] Unhandled exception occurred while processing request: /api/Assets/ (User: anonymous, Inst: none)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgResolverTypeInfo.GetResolutionAsObject(Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgTypeInfo.GetObjectResolution(Object value)
   at Npgsql.NpgsqlParameter.ResolveConverter(PgTypeInfo typeInfo)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AssetManagement.API.DAL.QueryHandler.RepositoryQueryHandler.RepositoryQueryHandler`1.CreateAsync(TEntity entity, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\QueryHandler\RepositoryQueryHandler\RepositoryQueryHandler.cs:line 41
   at AssetManagement.API.DAL.Services.AssetService.AssetService.CreateAsync(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\AssetService\AssetService.cs:line 48
   at AssetManagement.API.Controllers.AssetsController.Create(AssetsCreateRequest request, CancellationToken cancellationToken) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Controllers\AssetsController.cs:line 55
   at lambda_method759(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at AssetManagement.API.Middleware.InstitutionContextMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\InstitutionContextMiddleware.cs:line 17
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AssetManagement.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 14
2025-11-25 18:48:58.912 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 18:48:58.991 +00:00 [INF] Subscription background service started at "2025-11-25T18:48:58.9898655Z" (User: , Inst: )
2025-11-25 18:49:01.725 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 18:49:40.935 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 18:49:41.437 +00:00 [INF] Subscription check completed at "2025-11-25T18:49:41.4379203Z" (User: , Inst: )
2025-11-25 18:49:41.683 +00:00 [ERR] Error processing asset "3fa85f64-5717-4562-b3fc-2c963f66afa6" (User: , Inst: )
System.DivideByZeroException: Attempted to divide by zero.
   at System.Decimal.DecCalc.VarDecDiv(DecCalc& d1, DecCalc& d2)
   at System.Decimal.op_Division(Decimal d1, Decimal d2)
   at AssetManagement.API.DAL.Services.DepreciationService.DepreciationService.CalculateCurrentValue(AssetsModel assetsModel) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\DepreciationService\DepreciationService.cs:line 50
   at AssetManagement.API.DAL.Services.DepreciationService.DepreciationService.UpdateDepreciationValuesAsync(AssetsModel assetsModel) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\DepreciationService\DepreciationService.cs:line 82
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 77
2025-11-25 18:49:48.355 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 19:38:48.591 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 19:38:48.621 +00:00 [INF] Subscription background service started at "2025-11-25T19:38:48.6210505Z" (User: , Inst: )
2025-11-25 19:38:49.516 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 19:38:49.665 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 19:38:49.743 +00:00 [INF] Subscription check completed at "2025-11-25T19:38:49.7431416Z" (User: , Inst: )
2025-11-25 19:38:49.858 +00:00 [INF] Updated depreciation for asset string: current value Â¤0.00 (User: , Inst: )
2025-11-25 19:38:49.874 +00:00 [INF] [Redis] Published message to channel: notifications (User: , Inst: )
2025-11-25 19:38:49.910 +00:00 [ERR] Error processing asset "3fa85f64-5717-4562-b3fc-2c963f66afa6" (User: , Inst: )
System.ArgumentNullException: Value cannot be null. (Parameter 'address')
   at MimeKit.MailboxAddress..ctor(Encoding encoding, String name, String address)
   at MimeKit.MailboxAddress..ctor(String name, String address)
   at AssetManagement.API.DAL.Services.EmailService.EmailService.SendEmailAsync(String to, String subject, String htmlBody) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\EmailService\EmailService.cs:line 12
   at AssetManagement.API.DAL.Services.NotificationService.NotificationService.SendMaintenanceDueAsync(AssetsModel assetsModel) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\NotificationService\NotificationService.cs:line 92
   at AssetManagement.API.DAL.Services.BackgroundServices.SubscriptionMaintenanceService.HandleAssetMaintenance(IAssetRepository assetRepo, INotificationService notificationService, IDepreciationService depreciationService, CancellationToken ct) in C:\Users\sammi\PROJECTS\PERSONAL\JET_BRAINS\FAST_TRACK_SERVICES\Assets_Management\Backend_API\AssetManagement\AssetManagement.API\DAL\Services\BackgroundServices\SubscriptionMaintenanceService.cs:line 81
2025-11-25 19:38:49.981 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:06:42.475 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:06:42.515 +00:00 [INF] Subscription background service started at "2025-11-25T22:06:42.5153676Z" (User: , Inst: )
2025-11-25 22:06:43.678 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:06:43.872 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:06:43.955 +00:00 [INF] Subscription check completed at "2025-11-25T22:06:43.9553298Z" (User: , Inst: )
2025-11-25 22:06:44.095 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 22:06:44.097 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 22:06:44.114 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:09:24.420 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:09:24.445 +00:00 [INF] Subscription background service started at "2025-11-25T22:09:24.4448926Z" (User: , Inst: )
2025-11-25 22:09:25.392 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:09:25.545 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:09:25.621 +00:00 [INF] Subscription check completed at "2025-11-25T22:09:25.6215366Z" (User: , Inst: )
2025-11-25 22:09:25.759 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:09:25.906 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:09:36.113 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:09:36.140 +00:00 [INF] Subscription background service started at "2025-11-25T22:09:36.1404430Z" (User: , Inst: )
2025-11-25 22:09:37.059 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:09:37.200 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:09:37.280 +00:00 [INF] Subscription check completed at "2025-11-25T22:09:37.2809355Z" (User: , Inst: )
2025-11-25 22:09:37.413 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:09:37.415 +00:00 [INF] Updated depreciation for asset Fantastic Plastic Ball: current value Â¤3,501.17 (User: , Inst: )
2025-11-25 22:09:37.542 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:09:56.708 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:09:56.738 +00:00 [INF] Subscription background service started at "2025-11-25T22:09:56.7376908Z" (User: , Inst: )
2025-11-25 22:09:57.664 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:09:57.799 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:09:57.909 +00:00 [INF] Subscription check completed at "2025-11-25T22:09:57.9098150Z" (User: , Inst: )
2025-11-25 22:09:58.071 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:09:58.110 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:09:58.113 +00:00 [INF] Updated depreciation for asset Fantastic Plastic Ball: current value Â¤3,501.17 (User: , Inst: )
2025-11-25 22:09:58.114 +00:00 [INF] Updated depreciation for asset Practical Wooden Bike: current value Â¤4,260.71 (User: , Inst: )
2025-11-25 22:10:37.022 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:10:37.052 +00:00 [INF] Subscription background service started at "2025-11-25T22:10:37.0524100Z" (User: , Inst: )
2025-11-25 22:10:37.934 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:10:38.078 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:10:38.156 +00:00 [INF] Subscription check completed at "2025-11-25T22:10:38.1567397Z" (User: , Inst: )
2025-11-25 22:10:38.265 +00:00 [INF] Querying health. (User: anonymous, Inst: none)
2025-11-25 22:10:38.266 +00:00 [INF] Health action queried successfully. (User: anonymous, Inst: none)
2025-11-25 22:10:38.295 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:10:38.298 +00:00 [INF] Updated depreciation for asset Fantastic Plastic Ball: current value Â¤3,501.17 (User: , Inst: )
2025-11-25 22:10:38.299 +00:00 [INF] Updated depreciation for asset Practical Wooden Bike: current value Â¤4,260.71 (User: , Inst: )
2025-11-25 22:10:46.119 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:10:46.153 +00:00 [INF] Subscription background service started at "2025-11-25T22:10:46.1528758Z" (User: , Inst: )
2025-11-25 22:10:47.306 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:10:47.660 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:10:47.767 +00:00 [INF] Subscription check completed at "2025-11-25T22:10:47.7676549Z" (User: , Inst: )
2025-11-25 22:10:47.878 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:10:47.879 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:10:47.881 +00:00 [INF] Updated depreciation for asset Fantastic Plastic Ball: current value Â¤3,501.17 (User: , Inst: )
2025-11-25 22:10:47.883 +00:00 [INF] Updated depreciation for asset Practical Wooden Bike: current value Â¤4,260.71 (User: , Inst: )
2025-11-25 22:10:47.948 +00:00 [INF] Creating asset type with name Furniture (User: anonymous, Inst: none)
2025-11-25 22:10:54.482 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:10:54.507 +00:00 [INF] Subscription background service started at "2025-11-25T22:10:54.5074514Z" (User: , Inst: )
2025-11-25 22:10:55.478 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:10:55.706 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:10:55.754 +00:00 [INF] Subscription check completed at "2025-11-25T22:10:55.7546378Z" (User: , Inst: )
2025-11-25 22:10:55.935 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:10:55.934 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:10:55.937 +00:00 [INF] Updated depreciation for asset Fantastic Plastic Ball: current value Â¤3,501.17 (User: , Inst: )
2025-11-25 22:10:55.939 +00:00 [INF] Updated depreciation for asset Practical Wooden Bike: current value Â¤4,260.71 (User: , Inst: )
2025-11-25 22:25:00.877 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:25:00.903 +00:00 [INF] Subscription background service started at "2025-11-25T22:25:00.9031930Z" (User: , Inst: )
2025-11-25 22:25:01.812 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:25:01.967 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:25:02.060 +00:00 [INF] Subscription check completed at "2025-11-25T22:25:02.0603887Z" (User: , Inst: )
2025-11-25 22:25:02.182 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:25:02.204 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:25:02.206 +00:00 [INF] Updated depreciation for asset Fantastic Plastic Ball: current value Â¤3,501.17 (User: , Inst: )
2025-11-25 22:25:02.208 +00:00 [INF] Updated depreciation for asset Practical Wooden Bike: current value Â¤4,260.71 (User: , Inst: )
2025-11-25 22:28:00.680 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:28:00.829 +00:00 [INF] Subscription background service started at "2025-11-25T22:28:00.8240350Z" (User: , Inst: )
2025-11-25 22:28:04.538 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
2025-11-25 22:28:44.910 +00:00 [WRN] Failed to determine the https port for redirect. (User: anonymous, Inst: none)
2025-11-25 22:28:45.240 +00:00 [INF] Subscription check completed at "2025-11-25T22:28:45.2402116Z" (User: , Inst: )
2025-11-25 22:28:45.367 +00:00 [INF] Fetching all asset types (User: anonymous, Inst: none)
2025-11-25 22:28:45.627 +00:00 [INF] Updated depreciation for asset Practical Wooden Bike: current value Â¤4,260.71 (User: , Inst: )
2025-11-25 22:28:54.100 +00:00 [INF] Updated depreciation for asset Awesome Steel Pants: current value Â¤2,539.76 (User: , Inst: )
2025-11-25 22:29:08.290 +00:00 [INF] Updated depreciation for asset Fantastic Plastic Ball: current value Â¤3,501.17 (User: , Inst: )
2025-11-25 22:35:19.636 +00:00 [INF] ðŸš€ Starting AssetManagement API... (User: , Inst: )
2025-11-25 22:35:19.706 +00:00 [INF] Subscription background service started at "2025-11-25T22:35:19.7057848Z" (User: , Inst: )
2025-11-25 22:35:21.687 +00:00 [INF] Subscription & Maintenance Background Service started. (User: , Inst: )
